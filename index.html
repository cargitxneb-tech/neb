<script>
  // Comprobamos si ya se ha cargado el contenido anteriormente (usando localStorage)
  if (!localStorage.getItem('barraLoaded')) {
    // Cargar el primer contenido y el script de barra.js
    fetch("barra/barrapc.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("menu-container").innerHTML = data;

        // Cargar el script una sola vez
        const script = document.createElement('script');
        script.src = 'barra/barra.js';
        script.onload = () => {
          console.log("barra.js cargado después del header.");
          if (typeof initMenu === "function") {
            initMenu(); // Inicializa el menú si está disponible
          }
        };
        document.body.appendChild(script);

        // Marcar que ya se ha cargado para evitar futuras recargas
        localStorage.setItem('barraLoaded', 'true');
      })
      .catch(error => console.error('Error al cargar el header:', error));
  }

  // Cargar el segundo contenido y el script para el menú 2
  fetch("barra/barra.html")
    .then(res => res.text())
    .then(data => {
      document.getElementById("menu2-container").innerHTML = data;

      const script = document.createElement('script');
      script.src = 'barra/barra.js';
      script.onload = () => {
        console.log("barra.js cargado después del header.");
        if (typeof initMenu2 === "function") {
          initMenu2(); // Inicializa el menú 2 si está disponible
        }
      };
      document.body.appendChild(script);
    })
    .catch(error => console.error('Error al cargar el header:', error));
</script>
